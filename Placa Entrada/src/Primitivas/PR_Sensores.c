/*******************************************************************************************************************************//**
 	\file #include PR_Sensores.c
 	\brief Primitivas de los sensores
 	\details Trabajo Practico Obligatorio
 	\author Marcos Trautman, Alan Kinast
 	\date 2016.11.25
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include "PR_Sensores.h"

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/
extern uint8_t Tecla;

extern uint8_t BufferEntradas[ENTRADAS];
/***********************************************************************************************************************************
 *** VARIABLES GLOBLES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** PROTOTIPO DE FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** FUNCIONES GLOBALES AL MODULO
 **********************************************************************************************************************************/

 /**
@fn void Ubicación ( void );
@brief indica la posición relativa de un movil
@author usted
@param [in] nlinea: void
@return un numero que indica la posición relativa de un movil
*/

uint8_t Ubicacion ( void )
{
	uint8_t aux;
	static uint8_t contador=2;
	aux = Tecla;
	Tecla = NO_KEY;
	if(aux==0)//if(BufferEntradas[0]==1)
	{
		return 1;
	}
	if(aux==1)//if(BufferEntradas[1]==1)
	{
		return contador;
		if(contador<5)
		{
			contador ++;
		}
		else
		{
			contador=2;
		}
	}
	if(aux==2)//if(BufferEntradas[2]==1)
	{
		return 6;
	}
	return 0;//Ninguno de los sensores esta activado
}

uint8_t GetKey ( void )
{
	uint8_t aux;
	aux = Tecla;
	Tecla = NO_KEY;
	return aux;
}
