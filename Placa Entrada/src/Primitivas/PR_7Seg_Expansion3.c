/*******************************************************************************************************************************//**
 	\file PR_7Seg_Expansion3.c
 	\brief Primitivas display 7 segmentos Expansion 3
 	\details Trabajo Practico Obligatorio
 	\author Marcos Trautman, Alan Kinast
 	\date 2016.11.25
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include "PR_7Seg_Expansion3.h"

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/
volatile unsigned char Digitos[DIGITOS];			//!< Buffer de display
/***********************************************************************************************************************************
 *** VARIABLES GLOBLES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** PROTOTIPO DE FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** FUNCIONES GLOBALES AL MODULO
 **********************************************************************************************************************************/

/**
	\fn  void Display(int Val,char dsp)
	\brief Presentacion de valores en el display
 	\param [in] val valor a mostrar
 	\param [in] dsp seleccion del sector del display
	\return void
*/
void Display_Expansion3(int Val,char dsp)
{
	unsigned char a ;
	char aux[4];


	aux[0] = aux[1] = aux[2] = aux[3] = 0;

	if( Val < 0 )
	{

        Val = -Val;
	}

	//* Convierto a 7 Seg.
	for(a = 2 ; a ; a-- )
	{
		aux[a] = Val % 10 ;
		Val /= 10;
	}
	aux[ 0 ] = Val ;

	switch(dsp)
	{
		case DSP0:
			Digitos[ 2 ] = aux[ 2 ];
			Digitos[ 1 ] = aux[ 1 ];
			Digitos[ 0 ] = aux[ 0 ];
			break;

		case DSP1:
			Digitos[ 5 ] = aux[ 2 ];
			Digitos[ 4 ] = aux[ 1 ];
			Digitos[ 3 ] = aux[ 0 ];
			break;
	}
}
