/*******************************************************************************************************************************//**
 	\file #include PR_Pwm.c
 	\brief Primitivas del PWM
 	\details Trabajo Practico Obligatorio
 	\author Marcos Trautman, Alan Kinast
 	\date 2016.11.25
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include "PR_Pwm.h"

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/
extern volatile uint32_t Buff_PWM [ ];
/***********************************************************************************************************************************
 *** VARIABLES GLOBLES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** PROTOTIPO DE FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** FUNCIONES GLOBALES AL MODULO
 **********************************************************************************************************************************/

/**
	\fn  void PushServo (uint8_t angulo)
	\brief Carga en el buffer la conversion del angulo solicitado para su posterior lectura en driver
 	\details
 	\param 	[in] uint8_t angulo
 			Puede tomar 3 valores:
 				CEROGRADOS
 				NOVENTAGRADOS
 				CIENTOOCHENTA
 			Cualquier otro valor va a tomarlo como CEROGRADOS

 	\return void
 	\author Alan Kinast, Marcos Trautman
 	\date 2016.11.25
*/

void PushServo (uint8_t angulo)
{
	switch ( angulo )
	{
		case CEROGRADOS:
			Buff_PWM [ 0 ] = ( (FRECUENCIA_GIRO * 4) / 100 );//0ยบ//( (FRECUENCIA_GIRO * 25) / 100 );
			Buff_PWM [ 1 ] = VALOR_NULL;
			break;

		case NOVENTAGRADOS:
			Buff_PWM [ 0 ] = ( (FRECUENCIA_GIRO * 16) / 200 );//( (FRECUENCIA_GIRO * 60) / 100 );
			Buff_PWM [ 1 ] = VALOR_NULL;
			break;

		case CIENTOOCHENTA:
			Buff_PWM [ 0 ] = ( (FRECUENCIA_GIRO * 20) / 100 );//180ยบ
			Buff_PWM [ 1 ] = VALOR_NULL;
			break;


		default:
			Buff_PWM [ 0 ] = ( (FRECUENCIA_GIRO * 4) / 100 );//0ยบ
			Buff_PWM [ 1 ] = VALOR_NULL;
			break;
	}
}
